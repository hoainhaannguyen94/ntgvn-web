<div class="grid-widget-container mat-elevation-z4">
    <ng-container *ngIf="isLoading">
        <ng-container *ngTemplateOutlet="loading" />
    </ng-container>
    <ng-container *ngIf="!isLoading">
        <ng-container *ngTemplateOutlet="loaded" />
    </ng-container>
</div>

<ng-template #loading>
    <div class="widget-loading">
        <div>
            <content-loader [shape]="'rect'" [width]="'100%'" [height]="'100%'" />
        </div>
    </div>
</ng-template>

<ng-template #loaded>
    <ng-container *ngIf="config">
        <div class="grid-widget-title">{{config.title}}</div>
        <div class="grid-widget-content full-h">
            <div class="base-grid-container">
                <div class="base-grid-table">
                    <table mat-table [dataSource]="dataSource" matSort>
                        <ng-container *ngFor="let column of columns; trackBy:trackByFn;">
                            <ng-container [ngSwitch]="column">
                                <ng-container *ngSwitchCase="'_createdBy'">
                                    <ng-container [matColumnDef]="column">
                                        <th mat-header-cell *matHeaderCellDef>{{headers[column]}}</th>
                                        <td mat-cell *matCellDef="let element">{{element[column] | userDetails |
                                            async | objectProperty: 'name'}}</td>
                                    </ng-container>
                                </ng-container>
                                <ng-container *ngSwitchCase="'_customerId'">
                                    <ng-container [matColumnDef]="column">
                                        <th mat-header-cell *matHeaderCellDef>{{headers[column]}}</th>
                                        <td mat-cell *matCellDef="let element">{{element[column] | customerDetails |
                                            async | objectProperty: 'name'}}</td>
                                    </ng-container>
                                </ng-container>
                                <ng-container *ngSwitchCase="'_productId'">
                                    <ng-container [matColumnDef]="column">
                                        <th mat-header-cell *matHeaderCellDef>{{headers[column]}}</th>
                                        <td mat-cell *matCellDef="let element">{{element[column] | productDetails |
                                            async | objectProperty: 'name'}}</td>
                                    </ng-container>
                                </ng-container>
                                <ng-container *ngSwitchCase="'createdAt'">
                                    <ng-container [matColumnDef]="column">
                                        <th mat-header-cell *matHeaderCellDef>{{headers[column]}}</th>
                                        <td mat-cell *matCellDef="let element">{{element[column] | date: 'MMM d,
                                            y'}}</td>
                                    </ng-container>
                                </ng-container>
                                <ng-container *ngSwitchCase="'deliveryAt'">
                                    <ng-container [matColumnDef]="column">
                                        <th mat-header-cell *matHeaderCellDef>{{headers[column]}}</th>
                                        <td mat-cell *matCellDef="let element">{{element[column] | date: 'MMM d,
                                            y'}}</td>
                                    </ng-container>
                                </ng-container>
                                <ng-container *ngSwitchCase="'total'">
                                    <ng-container [matColumnDef]="column">
                                        <th mat-header-cell *matHeaderCellDef>{{headers[column]}}</th>
                                        <td mat-cell *matCellDef="let element">{{element[column] | currency: 'VND'}}
                                        </td>
                                    </ng-container>
                                </ng-container>
                                <ng-container *ngSwitchCase="'status'">
                                    <ng-container [matColumnDef]="column">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{headers[column]}}
                                        </th>
                                        <td mat-cell *matCellDef="let element">
                                            <div class="box-status --order-status-{{element.status}}">
                                                {{element[column] | orderStatusDetails | async | objectProperty:
                                                'displayName' | orderStatusUppercase}}
                                            </div>
                                        </td>
                                    </ng-container>
                                </ng-container>
                                <ng-container *ngSwitchDefault>
                                    <ng-container [matColumnDef]="column">
                                        <th mat-header-cell *matHeaderCellDef>{{headers[column]}}</th>
                                        <td mat-cell *matCellDef="let element">{{element[column]}}</td>
                                    </ng-container>
                                </ng-container>
                            </ng-container>
                        </ng-container>
                        <tr mat-header-row *matHeaderRowDef="columns"></tr>
                        <tr mat-row *matRowDef="let row; columns: columns;"></tr>
                    </table>
                </div>
            </div>
        </div>
    </ng-container>
</ng-template>
